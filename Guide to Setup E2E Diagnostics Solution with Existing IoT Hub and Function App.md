# Setup E2E Diagnostic solution with existing IoT Hub and Function App
## Provision diagnostics resources using ARM template
1. Navigate to [e2e diagnostics repo](https://github.com/VSChina/iot-hub-e2e-diagnostic/tree/existing_HUB_AF)
2. Click **Deploy to Azure**, it will navigate to azure portal
3. Select subscription and resource group that existing IoT Hub and Azure Function belongs to
![](./images/New_E2E_IoT_AF.PNG)
4. Two lower case letters prefix is used as prefix of provisioned resources for distinguishing from other resources
5. Check "*I agree to terms and conditions stated above*"
6. Click **Purchase**

## Modifying existing IoT Hub
Please refer to [Modify Existing IoT Hub](./Modify%20Existing%20IoT%20Hub.md)

## Modifying existing Azure Function
Please refer to [Modify Existing Azure Function](./Modify%20Existing%20Azure%20Function.md)

## Configure Web App
Please refer the document [Configure Application Insights Keys in Web App](./Guide%20to%20Config%20Application%20Insights%20Keys%20in%20Web%20App.md)
